<!doctype html>

<head>
  <meta charset="utf-8">

  <title></title>
  <meta name="description" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/demo.css">

  <script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body>

  <div id="container">
    <header>
    </header>
    <div id="main" role="main">
      <h1>Touch Test</h1>
      <p># touches: <span id="numtouches">0</span></p>
      <p>Touches: <span  id="touchset"></span></p>
      <p>Target Touches<br>
        <span id="targettouchset"></span>
      </p>
      <p id="msg">Nothing</p>  
    </div>
    <footer>

    </footer>
  </div> <!--! end of #container -->


  <script src="js/libs/jquery-1.7.1.min.js"></script>

  <!-- scripts concatenated and minified via ant build script -->
  <script src="js/helper.js"></script>
  <!-- end concatenated and minified scripts-->
  
  <!--<script src="js/demo.js"></script>-->
  <script>
  
  function write_touch_data(touches, writer) {
    var touch_str = "";
    for (var i=0; i<touches.length; i++) {
      var touch = touches[i];
      var the_str = "ID: " + touch.identifier;
      the_str += " px: " + touch.pageX;
      the_str += " py: " + touch.pageY;
      the_str += " sx: " + touch.screenX;
      the_str += " sy: " + touch.screenY;
      the_str += " cx: " + touch.clientX;
      the_str += " cy: " + touch.clientY;
      the_str += " target: " + touch.target.nodeName;
      the_str += "<br>";
      
      touch_str += the_str;
    }
    $("#numtouches").text(touches.length);
    writer.html(touch_str);
  }
  
  var currentelement = null;
  $("#main").on('touchstart',function(e) {
    e.preventDefault();
    currentElement = this;
    var evt = e.originalEvent;
    var touches = evt.touches;
    $("#msg").text("Touching");
    write_touch_data(touches, $("#touchset"));
  });
  $("#main").on('touchend', function(e) {
    e.preventDefault();
    currentElement = null;
    var evt = e.originalEvent;
    var touches = evt.touches;
    $("#msg").text("Not touching");
    write_touch_data(touches, $("#touchset"));
  });
  $("#main").on('touchmove', function(e) {
    e.preventDefault();
    var evt = e.originalEvent;
    var touches = evt.touches;
    var targettouches = evt.targetTouches;
    $("#msg").text("moving");
    write_touch_data(touches, $("#touchset"));
    write_touch_data(targettouches, $("#targettouchset"));
  });
  
  </script>

  <!--<script src="https://getfirebug.com/firebug-lite.js">
  </script>-->

</body>
</html>
